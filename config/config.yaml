# Playwright 测试框架配置文件

# 浏览器配置
browser:
  type: chromium  # chromium, firefox, webkit
  headless: false
  slow_mo: 0
  timeout: 30000
  viewport:
    width: 1920
    height: 1080
  args:
    - --start-maximized
  # 录制配置
  video:
    enabled: false
    dir: reports/videos
  screenshot:
    enabled: true
    dir: reports/screenshots
    on_failure: true

# 拦截配置
interception:
  enabled: true
  # 需要拦截的 host 列表
  hosts:
    - api.example.com
    - test-api.example.com
  # 保存请求数据
  save_requests: true
  requests_dir: data/requests
  # 请求去重
  deduplicate: true
  # 忽略的请求类型
  ignore_resource_types:
    - image
    - stylesheet
    - font
    - media

# 报告配置
reports:
  ui:
    format: html  # html, allure, json
    output_dir: reports/ui
    title: UI 测试报告
  api:
    format: html
    output_dir: reports/api
    title: API 测试报告
  # 报告归档
  archive:
    enabled: true
    keep_latest: 10
  
# 日志配置
logging:
  level: INFO  # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: logs/test.log
  max_bytes: 10485760  # 10MB
  backup_count: 5

# API 测试配置
api:
  base_url: https://api.example.com
  timeout: 30
  retry:
    max_attempts: 3
    backoff_factor: 1
  headers:
    User-Agent: Playwright-Test-Framework/1.0
  # 验证配置
  verify_ssl: true
  
# 测试数据配置
test_data:
  dir: data/test_data
  # 支持的格式
  formats:
    - json
    - yaml
    - csv

# 环境配置
environment: test  # dev, test, staging, prod

# 并行配置
parallel:
  enabled: false
  workers: 4

# 失败重试
retry_failed:
  enabled: true
  max_retries: 2

# 性能监控
performance:

# 多商户配置
merchants:
  merchant_a:
    test:
      api_url: https://test-api.merchant-a.com
      ui_url: https://test.merchant-a.com
      username: test_user_a
      password: test_password_a
      interception_hosts:
        - test-api.merchant-a.com
    prod:
      api_url: https://api.merchant-a.com
      ui_url: https://merchant-a.com
      username: prod_user_a
      password: prod_password_a
      interception_hosts:
        - api.merchant-a.com
  merchant_b:
    test:
      api_url: https://test-api.merchant-b.com
      ui_url: https://test.merchant-b.com
      username: test_user_b
      password: test_password_b
      interception_hosts:
        - test-api.merchant-b.com
    prod:
      api_url: https://api.merchant-b.com
      ui_url: https://merchant-b.com
      username: prod_user_b
      password: prod_password_b
      interception_hosts:
        - api.merchant-b.com
  enabled: true
  thresholds:
    page_load_time: 3000  # ms
    api_response_time: 1000  # ms
